import "@typespec/http";
import "@typespec/rest";
import "@typespec/versioning";
import "@azure-tools/typespec-azure-core";
import "@azure-tools/typespec-azure-resource-manager";
import "@azure-tools/typespec-client-generator-core";
import "@typespec/openapi";
import "../shared/main.tsp";

using TypeSpec.Http;
using TypeSpec.Rest;
using TypeSpec.Versioning;
using OpenAPI;
using Azure.Core;
using Azure.ClientGenerator.Core;
using Azure.ResourceManager;

#suppress "@azure-tools/typespec-azure-resource-manager/missing-operations-endpoint" "Supress missing operations endpoint as the same is defined ../operations/main.tsp."
@armProviderNamespace
@service({
  title: "Microsoft.AwsConnector",
})
@doc("Microsoft.AwsConnector Resource Provider management API.")
@versioned(Versions)
@armCommonTypesVersion(Azure.ResourceManager.CommonTypes.Versions.v5)
namespace Microsoft.AwsConnector;

/** Api versions */
enum Versions {
  /** 2024-08-01-preview api version */
  @useDependency(Azure.ResourceManager.Versions.v1_0_Preview_1)
  `2024-08-01-preview`,
}

//---------------------------------------------- LogsSubscriptionFilters ----------------------------------------------
#suppress "@azure-tools/typespec-azure-core/casing-style" "Supress casing style as the name is defined in aws."
@doc("A Microsoft.AwsConnector resource")
model LogsSubscriptionFilter
  is TrackedResource<LogsSubscriptionFilterProperties> {
  @doc("Name of LogsSubscriptionFilter")
  @pattern("^(?=.{0,259}[^\\s.]$)(?!.*[<>%&\\?/#])")
  @key("name")
  @path
  @segment("logsSubscriptionFilters")
  name: string;
}

#suppress "@azure-tools/typespec-azure-core/casing-style" "Supress casing style as the property name is defined in aws."
#suppress "@azure-tools/typespec-azure-core/no-unknown" "Supress no-unknown to handle the datatype object used in aws"
#suppress "@azure-tools/typespec-azure-resource-manager/arm-no-record" "Supress arm-no-record to handle the datatype object used in aws"
#suppress "@azure-tools/typespec-azure-core/property-name-conflict" "AWSConnector will not generate SDK. So, supressing this error"
@doc("Definition of LogsSubscriptionFilter")
model LogsSubscriptionFilterProperties {
  @doc("Gets and sets the property awsProperties.")
  awsProperties?: AwsLogsSubscriptionFilterProperties;

  ...AwsCommonProperties;
}

#suppress "@azure-tools/typespec-azure-core/casing-style" "Supress casing style as the property name is defined in aws."
#suppress "@azure-tools/typespec-azure-core/no-unknown" "Supress no-unknown to handle the datatype object used in aws"
#suppress "@azure-tools/typespec-azure-resource-manager/arm-no-record" "Supress arm-no-record to handle the datatype object used in aws"
#suppress "@azure-tools/typespec-azure-core/property-name-conflict" "AWSConnector will not generate SDK. So, supressing this error"
@doc("Definition of awsLogsSubscriptionFilter")
model AwsLogsSubscriptionFilterProperties {
  @doc("Gets and sets the property destinationArn. The Amazon Resource Name (ARN) of the destination.")
  destinationArn?: string;

  @doc("Gets and sets the property distribution. The method used to distribute log data to the destination. By default, log data is grouped by log stream, but the grouping can be set to random for a more even distribution. This property is only applicable when the destination is an Amazon Kinesis stream.")
  distribution?: Distribution;

  @doc("Gets and sets the property filterName. The name of the filter generated by resource.")
  filterName?: string;

  @doc("Gets and sets the property filterPattern. The filtering expressions that restrict what gets delivered to the destination AWS resource.")
  filterPattern?: string;

  @doc("Gets and sets the property logGroupName. Existing log group that you want to associate with this filter.")
  logGroupName?: string;

  @doc("Gets and sets the property roleArn. The ARN of an IAM role that grants CloudWatch Logs permissions to deliver ingested log events to the destination stream. You don't need to provide the ARN when you are working with a logical destination for cross-account delivery.")
  roleArn?: string;
}

@doc("Distribution enum")
union Distribution {
  @doc("Distribution enum ByLogStream")
  ByLogStream: "ByLogStream",

  @doc("Distribution enum Random")
  Random: "Random",

  string,
}

#suppress "@azure-tools/typespec-azure-core/casing-style" "Supress casing style as the name is defined in aws."
@armResourceOperations
interface LogsSubscriptionFilters {
  get is ArmResourceRead<LogsSubscriptionFilter>;
  @doc("Create a LogsSubscriptionFilter. Please note that end user resource creation is currently restricted, but it will be enabled in the future.")
  createOrUpdate is ArmResourceCreateOrUpdateAsync<LogsSubscriptionFilter>;
  update is ArmCustomPatchAsync<
    LogsSubscriptionFilter,
    Azure.ResourceManager.Foundations.TagsUpdateModel<LogsSubscriptionFilter>
  >;
  delete is ArmResourceDeleteWithoutOkAsync<LogsSubscriptionFilter>;
  listByResourceGroup is ArmResourceListByParent<LogsSubscriptionFilter>;
  listBySubscription is ArmListBySubscription<LogsSubscriptionFilter>;
}

//--------------------------------------------------------------------------------------------
// This TypeSpec was auto genrated by aws2SwaggerMain.js tool
//
// Input used to generate TypeSpec:
// Cloud Control API Type: AWS::Logs::SubscriptionFilter
//--------------------------------------------------------------------------------------------
