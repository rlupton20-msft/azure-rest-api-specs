{
  "title": "Create AutopilotMachineFunction",
  "operationId": "AutopilotMachineFunction_CreateOrUpdate",
  "parameters": {
    "subscriptionId": "mySubscriptionId",
    "resourceGroupName": "myResourceGroup",
    "resourceName": "prodUSEastAzcis",
    "api-version": "2023-08-22-preview",
    "resource": {
      "properties": {
        "machineFunctions": [
          {
            "machineFunctionName": "ZeusCore",
            "allocationType": "LegacyMachine",
            "requestedNodeLabels": "IPv4Reuse:False|SKU:WCS-G6-i26c{24core}",
            "numberOfMachines": "2",
            "additionalFields": [
              "NumberOfScaleUnits=1",
              "FailingLimit=20,20"
            ]
          },
          {
            "machineFunctionName": "ZeusHost",
            "allocationType": "LogicalMachine",
            "requestedNodeLabels": "IPv4Reuse:False|SKU:WCS-G6-i26c{24core}",
            "numberOfMachines": "3",
            "additionalFields": [
              "NumberOfScaleUnits=1",
              "FailingLimit=20,20"
            ]
          }
        ],
        "environmentName": "Zeus",
        "clusterName": "DSM04P",
        "sourceEnvironment": "AzureUnallocated-Prod-DSM04P",
        "sourceManaTree": "PilotFish.CEG.AzureUnallocated",
        "targetManaTree": "PilotFish.CEG.AzureCompute.SMD",
        "requestedNodeLabels": "IPv4Reuse:False|SKU:WCS-G6-i26c{24core}"
      }
    }
  },
  "responses": {
    "200": {
      "body": {
        "id": "/subscriptions/mySubscriptionId/resourceGroups/myResourceGroup/providers/Microsoft.AzureCis/autopilotMachineFunctions/prodUSEastAzcis",
        "name": "prodUSEastAzcis",
        "type": "Microsoft.AzureCis/autopilotMachineFunctions",
        "properties": {
          "provisioningState": "Accepted",
          "machineFunctions": [
            {
              "machineFunctionName": "ZeusCore",
              "allocationType": "LegacyMachine",
              "requestedNodeLabels": "IPv4Reuse:False|SKU:WCS-G6-i26c{24core}",
              "numberOfMachines": "2",
              "additionalFields": [
                "NumberOfScaleUnits=1",
                "FailingLimit=20,20"
              ]
            },
            {
              "machineFunctionName": "ZeusHost",
              "allocationType": "LogicalMachine",
              "requestedNodeLabels": "IPv4Reuse:False|SKU:WCS-G6-i26c{24core}",
              "numberOfMachines": "3",
              "additionalFields": [
                "NumberOfScaleUnits=1",
                "FailingLimit=20,20"
              ]
            }
          ],
          "environmentName": "Zeus",
          "clusterName": "DSM04P",
          "sourceEnvironment": "AzureUnallocated-Prod-DSM04P",
          "sourceManaTree": "PilotFish.CEG.AzureUnallocated",
          "targetManaTree": "PilotFish.CEG.AzureCompute.SMD",
          "requestedNodeLabels": "IPv4Reuse:False|SKU:WCS-G6-i26c{24core}"
        }
      }
    },
    "201": {
      "body": {
        "id": "/subscriptions/mySubscriptionId/resourceGroups/myResourceGroup/providers/Microsoft.AzureCis/autopilotMachineFunctions/prodUSEastAzcis",
        "name": "prodUSEastAzcis",
        "type": "Microsoft.AzureCis/autopilotMachineFunctions",
        "properties": {
          "provisioningState": "Accepted",
          "machineFunctions": [
            {
              "machineFunctionName": "ZeusCore",
              "allocationType": "LegacyMachine",
              "requestedNodeLabels": "IPv4Reuse:False|SKU:WCS-G6-i26c{24core}",
              "numberOfMachines": "2",
              "additionalFields": [
                "NumberOfScaleUnits=1",
                "FailingLimit=20,20"
              ]
            },
            {
              "machineFunctionName": "ZeusHost",
              "allocationType": "LogicalMachine",
              "requestedNodeLabels": "IPv4Reuse:False|SKU:WCS-G6-i26c{24core}",
              "numberOfMachines": "3",
              "additionalFields": [
                "NumberOfScaleUnits=1",
                "FailingLimit=20,20"
              ]
            }
          ],
          "environmentName": "Zeus",
          "clusterName": "DSM04P",
          "sourceEnvironment": "AzureUnallocated-Prod-DSM04P",
          "sourceManaTree": "PilotFish.CEG.AzureUnallocated",
          "targetManaTree": "PilotFish.CEG.AzureCompute.SMD",
          "requestedNodeLabels": "IPv4Reuse:False|SKU:WCS-G6-i26c{24core}"
        }
      }
    }
  }
}
