{
  "title": "Create DstsApplication",
  "operationId": "DstsApplication_CreateOrUpdate",
  "parameters": {
    "subscriptionId": "mySubscriptionId",
    "resourceGroupName": "myResourceGroup",
    "resourceName": "prodUSEastAzcis",
    "api-version": "2023-08-22-preview",
    "resource": {
      "properties": {
        "applicationAccount": {
          "dstsInstance": "Instance 1",
          "applicationAccountName": "Application 1",
          "realms": [
            "realm1",
            "realm2"
          ],
          "servicePrincipalNames": [
            "name1",
            "name2"
          ],
          "replyToAddresses": [
            "address1",
            "address2"
          ],
          "groupId": "9aa8c2f2-ef5b-459f-9c10-613768430a44",
          "groupName": "Group1",
          "isMfaEnabled": true,
          "sawDeviceEnforcement": "full SAW enforcement will apply to the application",
          "isElevatedAccess": true,
          "isProduction": true,
          "claimRules": [
            {
              "clientIdentifier": {
                "type": "http://sts.msft.net/user/Group",
                "value": "GroupName"
              },
              "claim": {
                "type": "http://schemas.microsoft.com/ws/2008/06/identity/claims/role",
                "value": "PlatformServiceViewer"
              },
              "clientIdentityOrigin": "MSIT-ADFS-Federation",
              "isRegionalEnforced": true
            }
          ],
          "applicationClientIdentity": {
            "dmsiInfo": {
              "path": "/path/to/dmsi",
              "region": "asiaeast-dsms.dsms.core.windows.net",
              "subscriptions": [
                "ef06429b-d53b-4362-92b9-b5fff2d27320"
              ]
            },
            "type": "Dsmi",
            "clientTokenIpRangeRestrictions": [
              {
                "fromIpAddress": "10.10.10.0",
                "toIpAddress": "10.10.10.10"
              }
            ]
          }
        }
      }
    }
  },
  "responses": {
    "200": {
      "body": {
        "id": "/subscriptions/mySubscriptionId/resourceGroups/myResourceGroup/providers/Microsoft.AzureCIS/dstsApplications/prodUSEastAzcis",
        "name": "prodUSEastAzcis",
        "type": "Microsoft.AzureCIS/dstsApplications",
        "properties": {
          "provisioningState": "Accepted",
          "applicationAccount": {
            "dstsInstance": "Instance 1",
            "applicationAccountName": "Application 1",
            "realms": [
              "realm1",
              "realm2"
            ],
            "servicePrincipalNames": [
              "name1",
              "name2"
            ],
            "replyToAddresses": [
              "address1",
              "address2"
            ],
            "groupId": "9aa8c2f2-ef5b-459f-9c10-613768430a44",
            "groupName": "Group1",
            "isMfaEnabled": true,
            "sawDeviceEnforcement": "full SAW enforcement will apply to the application",
            "isElevatedAccess": true,
            "isProduction": true,
            "claimRules": [
              {
                "clientIdentifier": {
                  "type": "http://sts.msft.net/user/Group",
                  "value": "GroupName"
                },
                "claim": {
                  "type": "http://schemas.microsoft.com/ws/2008/06/identity/claims/role",
                  "value": "PlatformServiceViewer"
                },
                "clientIdentityOrigin": "MSIT-ADFS-Federation",
                "isRegionalEnforced": true
              }
            ],
            "applicationClientIdentity": {
              "dmsiInfo": {
                "path": "/path/to/dmsi",
                "region": "asiaeast-dsms.dsms.core.windows.net",
                "subscriptions": [
                  "ef06429b-d53b-4362-92b9-b5fff2d27320"
                ]
              },
              "type": "Dsmi",
              "clientTokenIpRangeRestrictions": [
                {
                  "fromIpAddress": "10.10.10.0",
                  "toIpAddress": "10.10.10.10"
                }
              ]
            }
          }
        }
      }
    },
    "201": {
      "body": {
        "id": "/subscriptions/mySubscriptionId/resourceGroups/myResourceGroup/providers/Microsoft.AzureCIS/dstsApplications/prodUSEastAzcis",
        "name": "prodUSEastAzcis",
        "type": "Microsoft.AzureCIS/dstsApplications",
        "properties": {
          "provisioningState": "Accepted",
          "applicationAccount": {
            "dstsInstance": "Instance 1",
            "applicationAccountName": "Application 1",
            "realms": [
              "realm1",
              "realm2"
            ],
            "servicePrincipalNames": [
              "name1",
              "name2"
            ],
            "replyToAddresses": [
              "address1",
              "address2"
            ],
            "groupId": "9aa8c2f2-ef5b-459f-9c10-613768430a44",
            "groupName": "Group1",
            "isMfaEnabled": true,
            "sawDeviceEnforcement": "full SAW enforcement will apply to the application",
            "isElevatedAccess": true,
            "isProduction": true,
            "claimRules": [
              {
                "clientIdentifier": {
                  "type": "http://sts.msft.net/user/Group",
                  "value": "GroupName"
                },
                "claim": {
                  "type": "http://schemas.microsoft.com/ws/2008/06/identity/claims/role",
                  "value": "PlatformServiceViewer"
                },
                "clientIdentityOrigin": "MSIT-ADFS-Federation",
                "isRegionalEnforced": true
              }
            ],
            "applicationClientIdentity": {
              "dmsiInfo": {
                "path": "/path/to/dmsi",
                "region": "asiaeast-dsms.dsms.core.windows.net",
                "subscriptions": [
                  "ef06429b-d53b-4362-92b9-b5fff2d27320"
                ]
              },
              "type": "Dsmi",
              "clientTokenIpRangeRestrictions": [
                {
                  "fromIpAddress": "10.10.10.0",
                  "toIpAddress": "10.10.10.10"
                }
              ]
            }
          }
        }
      }
    }
  }
}
