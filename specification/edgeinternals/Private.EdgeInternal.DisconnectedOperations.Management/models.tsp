import "@typespec/rest";
import "@typespec/http";
import "@azure-tools/typespec-azure-resource-manager";
import "@typespec/openapi3";

using TypeSpec.Rest;
using TypeSpec.Http;
using Azure.ResourceManager;
using TypeSpec.OpenAPI;
using TypeSpec.Versioning;

namespace Private.EdgeInternal;

/**
 * Connection Intent
 */
union ConnectionIntent {
  /**
   * Device is connected to cloud.
   */
  Connected: "Connected",

  string,

  /**
   * Device is disconnected from cloud.
   */
  Disconnected: "Disconnected",

  string,
}

/**
 * Billing model
 */
union BillingModel {
  /**
   * Billed on capacity.
   */
  @doc("Billed on capacity.")
  Capacity: "Capacity",

  string,
}

/**
 * Connection status
 */
union ConnectionStatus {
  /**
   * Device is connected to cloud.
   */
  Connected: "Connected",

  string,

  /**
   * Device is disconnected from cloud.
   */
  Disconnected: "Disconnected",

  string,
}

/**
 * Registration status
 */
union RegistrationStatus {
  /**
   * Device is registered to cloud.
   */
  Registered: "Registered",

  string,

  /**
   * Device is not registered to cloud.
   */
  Unregistered: "Unregistered",

  string,
}

/**
 * Auto renew status
 */
@added(Versions.v2025_08_01)
union AutoRenew {
  /**
   * Auto renew is enabled.
   */
  Enabled: "Enabled",

  string,

  /**
   * Auto renew is disabled.
   */
  Disabled: "Disabled",

  string,
}

/**
 * Pricing model
 */
@added(Versions.v2025_08_01)
union PricingModel {
  /**
   * Trial pricing model.
   */
  Trial: "Trial",

  string,

  /**
   * Annual pricing model.
   */
  Annual: "Annual",

  string,
}

@doc("The disconnected operation properties")
model DisconnectedOperationProperties {
  @visibility(Lifecycle.Read)
  @doc("The resource provisioning state")
  provisioningState?: ResourceProvisioningState;

  @visibility(Lifecycle.Read)
  @doc("The unique Id of the stamp")
  stampId: string;

  @visibility(Lifecycle.Read)
  @doc("The billing model")
  billingModel: BillingModel;

  @doc("The connection intent")
  connectionIntent: ConnectionIntent;

  @visibility(Lifecycle.Read)
  @doc("The connection status")
  connectionStatus?: ConnectionStatus;

  @doc("The registration intent")
  @visibility(Lifecycle.Update, Lifecycle.Read)
  registrationStatus?: RegistrationStatus;

  @doc("The device version")
  @visibility(Lifecycle.Update, Lifecycle.Read)
  deviceVersion?: string;

  @doc("Auto renew setting")
  @added(Versions.v2025_08_01)
  autoRenew?: AutoRenew;
}

@doc("The disconnected operation manifest")
model DisconnectedOperationDeploymentManifest {
  @visibility(Lifecycle.Read)
  @doc("The resource Id of the disconnected operations resource")
  resourceId: Azure.Core.armResourceIdentifier<[
    {
      type: "Private.EdgeInternal/disconnectedOperations";
    }
  ]>;

  @visibility(Lifecycle.Read)
  @doc("The resource name")
  resourceName: string;

  @visibility(Lifecycle.Read)
  @doc("The unique Id of the stamp")
  stampId: string;

  @visibility(Lifecycle.Read)
  @doc("The resource location")
  location: string;

  @visibility(Lifecycle.Read)
  @doc("The billing model")
  billingModel: BillingModel;

  @visibility(Lifecycle.Read)
  @doc("The connection intent")
  connectionIntent: ConnectionIntent;

  @visibility(Lifecycle.Read)
  @doc("The cloud in which the resource is registered")
  @added(Versions.v2025_05_01)
  cloud?: string;
}

/**
 * Release Type
 */
union ReleaseType {
  /**
   * Release is a new install.
   */
  Install: "Install",

  string,

  /**
   * Release is update.
   */
  Update: "Update",

  string,
}

@doc("The image properties")
model ImageProperties {
  @visibility(Lifecycle.Read)
  @doc("The resource provisioning state")
  provisioningState?: ResourceProvisioningState;

  @visibility(Lifecycle.Read)
  @doc("The version of the package in the format 1.1.1")
  releaseVersion: string;

  @visibility(Lifecycle.Read)
  @doc("The release name")
  releaseDisplayName: string;

  @visibility(Lifecycle.Read)
  @doc("The release notes")
  releaseNotes: string;

  @visibility(Lifecycle.Read)
  @doc("The release date")
  releaseDate: plainDate;

  @visibility(Lifecycle.Read)
  @doc("The release type")
  releaseType: ReleaseType;

  @visibility(Lifecycle.Read)
  @doc("The versions that are compatible for this update package.")
  compatibleVersions?: Array<string>;
}

@doc("The image download properties")
model ImageDownloadResponse {
  ...ImageProperties;

  @visibility(Lifecycle.Read)
  @doc("The unique Id of the download")
  transactionId: string;

  @visibility(Lifecycle.Read)
  @doc("The download uri")
  downloadLink: url;

  @visibility(Lifecycle.Read)
  @doc("The download link expiry time")
  linkExpiry: utcDateTime;
}

@doc("The image download properties")
model ImageDownloadResult {
  ...ImageProperties;

  @visibility(Lifecycle.Read)
  @doc("The unique Id of the download")
  transactionId: string;

  @visibility(Lifecycle.Read)
  @doc("The download uri")
  downloadLink: url;

  @visibility(Lifecycle.Read)
  @doc("The download link expiry time")
  linkExpiry: utcDateTime;
}

@doc("The artifact properties")
@added(Versions.v2025_05_01)
model ArtifactProperties {
  @visibility(Lifecycle.Read)
  @doc("The resource provisioning state")
  provisioningState?: ResourceProvisioningState;

  @visibility(Lifecycle.Read)
  @doc("The artifact display order")
  artifactOrder: int32;

  @visibility(Lifecycle.Read)
  @doc("The artifact title")
  title: string;

  @visibility(Lifecycle.Read)
  @doc("The artifact description")
  description: string;

  @visibility(Lifecycle.Read)
  @doc("The artifact size in MB")
  size?: int64;
}

@doc("The artifact download properties")
@added(Versions.v2025_05_01)
model ArtifactDownloadResult {
  ...ArtifactProperties;

  @visibility(Lifecycle.Read)
  @doc("The download uri")
  downloadLink: url;

  @visibility(Lifecycle.Read)
  @doc("The download link expiry time")
  linkExpiry: utcDateTime;
}

@doc("The hardware setting properties")
@added(Versions.v2025_08_01)
model HardwareSettingProperties {
  @visibility(Lifecycle.Read)
  @doc("The resource provisioning state")
  provisioningState?: ResourceProvisioningState;

  @visibility(Lifecycle.Update, Lifecycle.Read)
  @doc("Total number of cores")
  totalCores: int32;

  @visibility(Lifecycle.Update, Lifecycle.Read)
  @doc("Disk space in MB")
  diskSpace: int64;

  @visibility(Lifecycle.Update, Lifecycle.Read)
  @doc("Memory in MB")
  memory: int64;
}

@doc("Billing information")
@added(Versions.v2025_08_01)
model BillingInfo {
  @visibility(Lifecycle.Update, Lifecycle.Read)
  @doc("Number of cores")
  cores: int32;

  @visibility(Lifecycle.Update, Lifecycle.Read)
  @doc("Pricing model")
  pricingModel: PricingModel;

  @visibility(Lifecycle.Update, Lifecycle.Read)
  @doc("Billing start date")
  billingStartDate: plainDate;

  @visibility(Lifecycle.Update, Lifecycle.Read)
  @doc("Billing end date")
  billingEndDate: plainDate;
}

@doc("The billing configuration properties")
@added(Versions.v2025_08_01)
model BillingConfigurationProperties {
  @visibility(Lifecycle.Read)
  @doc("The resource provisioning state")
  provisioningState?: ResourceProvisioningState;

  @doc("Current billing configuration")
  @visibility(Lifecycle.Update, Lifecycle.Read)
  currentBilling: BillingInfo;

  @doc("Next billing configuration")
  @visibility(Lifecycle.Update, Lifecycle.Read)
  nextBilling: BillingInfo;
}
