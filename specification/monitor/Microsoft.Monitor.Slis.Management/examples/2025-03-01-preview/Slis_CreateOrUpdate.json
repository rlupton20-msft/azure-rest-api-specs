{
  "operationId": "Slis_CreateOrUpdate",
  "title": "CreateSli",
  "parameters": {
    "api-version": "2025-03-01-preview",
    "sliName": "testSli",
    "serviceGroupName": "testSG",
    "resource": {
      "properties": {
        "description": "Measures the performance characteristics of the GetContosoUsers() API. ",
        "category": "Latency",
        "evaluationType": "WindowBased",
        "enableAlert": true,
        "destinationAmwAccounts": [
          {
            "resourceId": "/subscriptions/<subId>/resourcegroups/<rgId>/providers/microsoft.monitor/accounts/<dest>",
            "identity": "/subscriptions/<subId>/resourcegroups/<rgId>/providers/Microsoft.ManagedIdentity/userAssignedIdentities/<idName>"
          }
        ],
        "baselineProperties": {
          "baseline": {
            "value": 99,
            "evaluationPeriodDays": 30,
            "evaluationCalculationType": "CalendarDays"
          }
        },
        "sliProperties": {
          "windowUptimeCriteria": {
            "target": 95,
            "comparator": ">="
          },
          "signals": {
            "signalSources": [
              {
                "signalSourceId": "A",
                "sourceAmwAccountManagedIdentity": "sourceAccountIdentity",
                "sourceAmwAccountResourceId": "/source/Account/Resource",
                "metricNamespace": "ContosoMetricsWest",
                "metricName": "Stamp1Latency",
                "filters": [
                  {
                    "dimensionName": "ApiName",
                    "operator": "==",
                    "value": "GetContosoUsers"
                  }
                ],
                "spatialAggregation": {
                  "type": "Average",
                  "dimensions": [
                    "Region",
                    "ResponseCode"
                  ]
                },
                "temporalAggregation": {
                  "type": "Average",
                  "windowSizeMinutes": 5
                }
              },
              {
                "signalSourceId": "B",
                "sourceAmwAccountManagedIdentity": "sourceAccountIdentity",
                "sourceAmwAccountResourceId": "/source/Account/Resource",
                "metricNamespace": "ContosoMetricsEast",
                "metricName": "Stamp2Latency",
                "filters": [
                  {
                    "dimensionName": "ApiName",
                    "operator": "==",
                    "value": "GetContosoUsers"
                  }
                ],
                "spatialAggregation": {
                  "type": "Average",
                  "dimensions": [
                    "Region",
                    "ResponseCode"
                  ]
                },
                "temporalAggregation": {
                  "type": "Average",
                  "windowSizeMinutes": 5
                }
              }
            ],
            "signalFormula": "(A + B) /2"
          }
        }
      }
    }
  },
  "responses": {
    "200": {
      "body": {
        "id": "/providers/Microsoft.Management/ServiceGroups/testSG/providers/Microsoft.Monitor/slis/testSli",
        "name": "testSli",
        "type": "Microsoft.Monitor/testSli",
        "properties": {
          "description": "Measures the performance characteristics of the GetContosoUsers() API. ",
          "category": "Latency",
          "evaluationType": "WindowBased",
          "provisioningState": "Succeeded",
          "streamingRuleId": "123",
          "streamingRuleLastUpdatedTimestamp": "2025-03-01T00:00:00Z",
          "enableAlert": true,
          "executionState": {
            "message": "",
            "state": "Succeeded"
          },
          "destinationAmwAccounts": [
            {
              "resourceId": "/subscriptions/<subId>/resourcegroups/<rgId>/providers/microsoft.monitor/accounts/<dest>",
              "identity": "/subscriptions/<subId>/resourcegroups/<rgId>/providers/Microsoft.ManagedIdentity/userAssignedIdentities/<idName>"
            }
          ],
          "destinationMetrics": [
            {
              "metricNamespace": "ContosoMetricsOut",
              "metricName": "Get API Latency:Uptime"
            },
            {
              "metricNamespace": "ContosoMetricsOut",
              "metricName": "Get API Latency:Downtime"
            },
            {
              "metricNamespace": "ContosoMetricsOut",
              "metricName": "Get API Latency:Value"
            }
          ],
          "baselineProperties": {
            "baseline": {
              "value": 99,
              "evaluationPeriodDays": 30,
              "evaluationCalculationType": "CalendarDays"
            }
          },
          "sliProperties": {
            "windowUptimeCriteria": {
              "target": 95,
              "comparator": ">="
            },
            "signals": {
              "signalSources": [
                {
                  "signalSourceId": "A",
                  "sourceAmwAccountManagedIdentity": "sourceAccountIdentity",
                  "sourceAmwAccountResourceId": "/source/Account/Resource",
                  "metricNamespace": "ContosoMetricsWest",
                  "metricName": "Stamp1Latency",
                  "filters": [
                    {
                      "dimensionName": "ApiName",
                      "operator": "==",
                      "value": "GetContosoUsers"
                    }
                  ],
                  "spatialAggregation": {
                    "type": "Average",
                    "dimensions": [
                      "Region",
                      "ResponseCode"
                    ]
                  },
                  "temporalAggregation": {
                    "type": "Average",
                    "windowSizeMinutes": 5
                  }
                },
                {
                  "signalSourceId": "B",
                  "sourceAmwAccountManagedIdentity": "sourceAccountIdentity",
                  "sourceAmwAccountResourceId": "/source/Account/Resource",
                  "metricNamespace": "ContosoMetricsEast",
                  "metricName": "Stamp2Latency",
                  "filters": [
                    {
                      "dimensionName": "ApiName",
                      "operator": "==",
                      "value": "GetContosoUsers"
                    }
                  ],
                  "spatialAggregation": {
                    "type": "Average",
                    "dimensions": [
                      "Region",
                      "ResponseCode"
                    ]
                  },
                  "temporalAggregation": {
                    "type": "Average",
                    "windowSizeMinutes": 5
                  }
                }
              ],
              "signalFormula": "(A + B) /2"
            }
          }
        }
      }
    },
    "201": {
      "body": {
        "id": "/providers/Microsoft.Management/ServiceGroups/testSG/providers/Microsoft.Monitor/slis/testSli",
        "name": "testSli",
        "type": "Microsoft.Monitor/testSli",
        "properties": {
          "description": "Measures the performance characteristics of the GetContosoUsers() API. ",
          "category": "Latency",
          "evaluationType": "WindowBased",
          "provisioningState": "Succeeded",
          "streamingRuleId": "123",
          "streamingRuleLastUpdatedTimestamp": "2025-03-01T00:00:00Z",
          "enableAlert": true,
          "executionState": {
            "message": "",
            "state": "Succeeded"
          },
          "destinationAmwAccounts": [
            {
              "resourceId": "/subscriptions/<subId>/resourcegroups/<rgId>/providers/microsoft.monitor/accounts/<dest>",
              "identity": "/subscriptions/<subId>/resourcegroups/<rgId>/providers/Microsoft.ManagedIdentity/userAssignedIdentities/<idName>"
            }
          ],
          "destinationMetrics": [
            {
              "metricNamespace": "ContosoMetricsOut",
              "metricName": "Get API Latency:Uptime"
            },
            {
              "metricNamespace": "ContosoMetricsOut",
              "metricName": "Get API Latency:Downtime"
            },
            {
              "metricNamespace": "ContosoMetricsOut",
              "metricName": "Get API Latency:Value"
            }
          ],
          "baselineProperties": {
            "baseline": {
              "value": 99,
              "evaluationPeriodDays": 30,
              "evaluationCalculationType": "CalendarDays"
            }
          },
          "sliProperties": {
            "windowUptimeCriteria": {
              "target": 95,
              "comparator": ">="
            },
            "signals": {
              "signalSources": [
                {
                  "signalSourceId": "A",
                  "sourceAmwAccountManagedIdentity": "sourceAccountIdentity",
                  "sourceAmwAccountResourceId": "/source/Account/Resource",
                  "metricNamespace": "ContosoMetricsWest",
                  "metricName": "Stamp1Latency",
                  "filters": [
                    {
                      "dimensionName": "ApiName",
                      "operator": "==",
                      "value": "GetContosoUsers"
                    }
                  ],
                  "spatialAggregation": {
                    "type": "Average",
                    "dimensions": [
                      "Region",
                      "ResponseCode"
                    ]
                  },
                  "temporalAggregation": {
                    "type": "Average",
                    "windowSizeMinutes": 5
                  }
                },
                {
                  "signalSourceId": "B",
                  "sourceAmwAccountManagedIdentity": "sourceAccountIdentity",
                  "sourceAmwAccountResourceId": "/source/Account/Resource",
                  "metricNamespace": "ContosoMetricsEast",
                  "metricName": "Stamp2Latency",
                  "filters": [
                    {
                      "dimensionName": "ApiName",
                      "operator": "==",
                      "value": "GetContosoUsers"
                    }
                  ],
                  "spatialAggregation": {
                    "type": "Average",
                    "dimensions": [
                      "Region",
                      "ResponseCode"
                    ]
                  },
                  "temporalAggregation": {
                    "type": "Average",
                    "windowSizeMinutes": 5
                  }
                }
              ],
              "signalFormula": "(A + B) /2"
            }
          }
        }
      }
    }
  }
}
