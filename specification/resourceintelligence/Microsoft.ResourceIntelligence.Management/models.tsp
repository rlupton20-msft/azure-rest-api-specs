import "@typespec/rest";
import "@typespec/http";
import "@azure-tools/typespec-azure-resource-manager";

using Azure.ResourceManager;

namespace Microsoft.ResourceIntelligence;

/**
 * The role which generates a specific message. Restricted to the user or assistant role.
 */
union Role {
  string,

  /**
   * If a message was generated by a human, the role should be assigned user
   */
  user: "user",

  /**
   * If a message was generated by ARG Query Generation service, then the role should be assistant
   */
  assistant: "assistant",

  /**
   * If a message provides high level instructions for the query generation, then the role should be system
   */
  system: "system",
}

/**
 * Status Category
 */
union StatusCategory {
  string,

  /**
   * Succeeded when query was generated successfully
   */
  Succeeded: "Succeeded",

  /**
   * Failed when query was not generated
   */
  Failed: "Failed",
}

/**
 * Query Generation Request
 */
model QueryGenerationRequest {
  /**
   * A collection of chat history to provide context in query generation
   */
  @identifiers(#[])
  history?: HistoryContext[];

  /**
   * Prompt text from user
   */
  prompt: string;
}

/**
 * History content generated by a user, assistant or system role
 */
model HistoryContext {
  /**
   * Content generated by a given role
   */
  content: string;

  /**
   * Role which generates the content e.g., user, assistant or system
   */
  role: Role;
}

/**
 * Query Generation Result
 */
model QueryGenerationResult {
  /**
   * Query generated for a given user prompt text
   */
  query: string;

  /**
   * Status for the query generation result
   */
  status: StatusResult;
}

/**
 * Status
 */
model StatusResult {
  /**
   * Status category for query generation result
   */
  category: StatusCategory;

  /**
   * Status message for query generation result
   */
  message: string;
}
