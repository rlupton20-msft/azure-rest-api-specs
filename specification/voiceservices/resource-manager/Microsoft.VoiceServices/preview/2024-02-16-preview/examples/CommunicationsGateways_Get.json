{
  "operationId": "CommunicationsGateways_Get",
  "title": "GetCommunicationsGatewayResource",
  "parameters": {
    "subscriptionId": "00000000-0000-0000-0000-000000000000",
    "resourceGroupName": "testrg",
    "api-version": "2024-02-16-preview",
    "name": "myname",
    "communicationsGatewayName": "myname"
  },
  "responses": {
    "200": {
      "body": {
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/testrg/providers/Microsoft.VoiceService/communicationsGateways/myname",
        "name": "myname",
        "location": "useast",
        "type": "Microsoft.VoiceService/communicationsGateways",
        "sku": {
          "name": "standard"
        },
        "properties": {
          "status": "ChangePending",
          "operatorPeerGroupConfigScheme": "UseOperatorPeerGroupConfig",
          "connectivity": "PublicAddress",
          "serviceLocations": [
            {
              "name": "eastus",
              "primaryRegionProperties": {
                "operatorAddresses": [
                  "10.1.1.1"
                ]
              },
              "acgAddressRanges": {
                "signalingForBackendServices": [
                  "12.34.12.1/30"
                ],
                "signalingForOperator": [
                  "12.34.12.1/30"
                ],
                "mediaForBackendServices": [
                  "12.34.12.1/30"
                ],
                "mediaForOperator": [
                  "12.34.12.1/30"
                ]
              },
              "acgContactInfo": {
                "peerGroups": [
                  {
                    "peerGroupName": "TPMPrd",
                    "srvRecord": "_sip._tls.TPMPrd-region1.fqdn.com",
                    "ipAddresses": [
                      "192.0.3.1",
                      "192.0.3.2"
                    ],
                    "port": 5061
                  },
                  {
                    "peerGroupName": "OCPrd",
                    "srvRecord": "_sip._tls.OCPrd-region1.fqdn.com",
                    "ipAddresses": [
                      "192.0.3.3",
                      "192.0.3.4"
                    ],
                    "port": 5063
                  },
                  {
                    "peerGroupName": "voicaiPrd",
                    "srvRecord": "_sip._tls.voicaiPrd-region1.fqdn.com",
                    "ipAddresses": [
                      "192.0.3.3",
                      "192.0.3.4"
                    ],
                    "port": 5065
                  }
                ],
                "backendServices": []
              }
            },
            {
              "name": "westus",
              "primaryRegionProperties": {
                "operatorAddresses": [
                  "10.1.1.2"
                ]
              },
              "acgAddressRanges": {
                "signalingForBackendServices": [
                  "12.34.12.1/30"
                ],
                "signalingForOperator": [
                  "12.34.12.1/30"
                ],
                "mediaForBackendServices": [
                  "12.34.12.1/30"
                ],
                "mediaForOperator": [
                  "12.34.12.1/30"
                ]
              },
              "acgContactInfo": {
                "peerGroups": [
                  {
                    "peerGroupName": "TPMPrd",
                    "srvRecord": "_sip._tls.TPMPrd-region2.fqdn.com",
                    "ipAddresses": [
                      "192.0.2.1",
                      "192.0.2.2"
                    ],
                    "port": 5061
                  },
                  {
                    "peerGroupName": "OCPrd",
                    "srvRecord": "_sip._tls.OCPrd-region2.fqdn.com",
                    "ipAddresses": [
                      "192.0.2.3",
                      "192.0.2.4"
                    ],
                    "port": 5063
                  },
                  {
                    "peerGroupName": "voicaiPrd",
                    "srvRecord": "_sip._tls.voicaiPrd-region2.fqdn.com",
                    "ipAddresses": [
                      "192.0.2.3",
                      "192.0.2.4"
                    ],
                    "port": 5065
                  }
                ],
                "backendServices": []
              }
            }
          ],
          "peerGroups": [
            {
              "peerGroupName": "TPMPrd",
              "peers": [
                {
                  "peerName": "TPMPrd1",
                  "peerType": "IP",
                  "ipsAndPorts": [
                    {
                      "ipAddress": "23.3.56.7",
                      "port": 5060
                    }
                  ],
                  "allowedSignalingSourceAddressPrefixes": [
                    "23.3.56.0/29"
                  ],
                  "allowedMediaSourceAddressPrefixes": [
                    "23.3.56.0",
                    "23.3.57.0"
                  ]
                },
                {
                  "peerName": "TPMPrd2",
                  "peerType": "IP",
                  "ipsAndPorts": [
                    {
                      "ipAddress": "23.3.57.7",
                      "port": 5060
                    }
                  ],
                  "allowedSignalingSourceAddressPrefixes": [
                    "24.3.58.0/29"
                  ],
                  "allowedMediaSourceAddressPrefixes": [
                    "23.3.56.0/29"
                  ]
                }
              ],
              "signalingProtocol": "TLS",
              "mediaProtocol": "SRTP",
              "codecs": [
                "PCMA",
                "PCMU",
                "G722"
              ]
            },
            {
              "peerGroupName": "OCPrd",
              "peers": [
                {
                  "peerName": "OCPrd1",
                  "peerType": "ARecord",
                  "aRecordsAndPorts": [
                    {
                      "aRecord": "oc0-region1.preview.comms.azure.com",
                      "port": 5060
                    }
                  ],
                  "allowedSignalingSourceAddressPrefixes": [
                    "23.3.57.0/29"
                  ],
                  "allowedMediaSourceAddressPrefixes": [
                    "23.3.56.0/29"
                  ]
                },
                {
                  "peerName": "OCPrd2",
                  "peerType": "SRV",
                  "srvRecord": "_sip._tls.OCPrd.fqdn.com",
                  "allowedSignalingSourceAddressPrefixes": [
                    "23.3.56.0",
                    "10.7.99.0"
                  ],
                  "allowedMediaSourceAddressPrefixes": [
                    "23.3.56.0",
                    "10.7.99.0"
                  ]
                }
              ],
              "signalingProtocol": "TLS",
              "mediaProtocol": "SRTP",
              "codecs": [
                "PCMA",
                "PCMU",
                "G722"
              ]
            },
            {
              "peerGroupName": "voicaiPrd",
              "peers": [
                {
                  "peerName": "voicaiPrd1",
                  "peerType": "IP",
                  "ipsAndPorts": [
                    {
                      "ipAddress": "23.3.56.9",
                      "port": 5060
                    }
                  ],
                  "allowedSignalingSourceAddressPrefixes": [
                    "23.3.56.0/29"
                  ],
                  "allowedMediaSourceAddressPrefixes": [
                    "23.3.56.0",
                    "23.3.57.0"
                  ]
                }
              ],
              "signalingProtocol": "TLS",
              "mediaProtocol": "SRTP",
              "codecs": [
                "PCMA",
                "PCMU",
                "G722"
              ]
            }
          ],
          "callPolicy": {
            "defaultMappings": {
              "peerGroupToService": [
                {
                  "peerGroup": "TPMPrd",
                  "defaultService": "TeamsPhoneMobile"
                },
                {
                  "peerGroup": "OCPrd",
                  "defaultService": "OperatorConnect"
                },
                {
                  "peerGroup": "voicaiPrd",
                  "defaultService": "AiVoiceServices"
                }
              ],
              "serviceToPeerGroup": [
                {
                  "service": "TeamsPhoneMobile",
                  "defaultPeerGroup": "TPMPrd"
                },
                {
                  "service": "OperatorConnect",
                  "defaultPeerGroup": "OCPrd"
                },
                {
                  "service": "AiVoiceServices",
                  "defaultPeerGroup": "voicaiPrd"
                }
              ]
            },
            "peerGroupRoutings": [
              {
                "peerGroupName": "TPMPrd",
                "routings": [
                  {
                    "peerName": "TPMPrd1",
                    "serviceLocation": "westus",
                    "priority": 0
                  },
                  {
                    "peerName": "TPMPrd1",
                    "serviceLocation": "eastus",
                    "priority": 1
                  },
                  {
                    "peerName": "TPMPrd2",
                    "serviceLocation": "westus",
                    "priority": 1
                  },
                  {
                    "peerName": "TPMPrd2",
                    "serviceLocation": "eastus",
                    "priority": 0
                  }
                ]
              },
              {
                "peerGroupName": "OCPrd",
                "routings": [
                  {
                    "peerName": "OCPrd1",
                    "serviceLocation": "westus",
                    "priority": 0
                  },
                  {
                    "peerName": "OCPrd1",
                    "serviceLocation": "eastus",
                    "priority": 1
                  },
                  {
                    "peerName": "OCPrd2",
                    "serviceLocation": "westus",
                    "priority": 1
                  },
                  {
                    "peerName": "OCPrd2",
                    "serviceLocation": "eastus",
                    "priority": 0
                  }
                ]
              },
              {
                "peerGroupName": "voicaiPrd",
                "routings": [
                  {
                    "peerName": "voicaiPrd1",
                    "serviceLocation": "westus",
                    "priority": 1
                  },
                  {
                    "peerName": "voicaiPrd1",
                    "serviceLocation": "eastus",
                    "priority": 0
                  }
                ]
              }
            ]
          },
          "codecs": [
            "PCMA",
            "PCMU",
            "G722",
            "G722_2",
            "SILK_8",
            "SILK_16"
          ],
          "customSipHeaders": {
            "headers": [
              {
                "name": "custom_header"
              }
            ]
          },
          "e911Type": "Standard",
          "platforms": [
            "OperatorConnect",
            "TeamsPhoneMobile",
            "AiVoiceServices"
          ],
          "autoGeneratedDomainNameLabelScope": "NoReuse",
          "autoGeneratedDomainNameLabel": "somelabel",
          "onPremMcpEnabled": false,
          "integratedMcpEnabled": true,
          "signalingProtocolForMcp": "TLS",
          "emergencyDialStrings": [
            "112",
            "911",
            "933",
            "999"
          ],
          "teamsVoicemailPilotNumber": "11231231234",
          "apiBridge": {
            "configureApiBridge": "enabled",
            "allowedAddressPrefixes": [
              "198.51.100.192/26"
            ]
          },
          "aiVoiceServices": {
            "callProtection": {
              "enabled": true,
              "logStorageAccountId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/examplerg/providers/Microsoft.Storage/storageAccounts/examplestorageaccount"
            }
          }
        }
      }
    }
  }
}
