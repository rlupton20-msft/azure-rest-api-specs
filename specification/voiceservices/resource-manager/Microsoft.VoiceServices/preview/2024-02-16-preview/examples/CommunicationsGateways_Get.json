{
  "operationId": "CommunicationsGateways_Get",
  "title": "GetCommunicationsGatewayResource",
  "parameters": {
    "subscriptionId": "00000000-0000-0000-0000-000000000000",
    "resourceGroupName": "testrg",
    "api-version": "2024-02-16-preview",
    "name": "myname",
    "communicationsGatewayName": "myname"
  },
  "responses": {
    "200": {
      "body": {
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/testrg/providers/Microsoft.VoiceService/communicationsGateways/myname",
        "name": "myname",
        "location": "useast",
        "type": "Microsoft.VoiceService/communicationsGateways",
        "sku": {
          "name": "standard"
        },
        "properties": {
          "status": "ChangePending",
          "operatorPeerGroupConfigScheme": "UseOperatorPeerGroupConfig",
          "serviceLocations": [
            {
              "name": "useast",
              "primaryRegionProperties": {
                "operatorAddresses": [
                  "198.51.100.1"
                ]
              },
              "acgAddressRanges": {
                "signalingForBackendServices": [
                  "12.34.12.1/30"
                ],
                "signalingForOperator": [
                  "12.34.12.1/30"
                ],
                "mediaForBackendServices": [
                  "12.34.12.1/30"
                ],
                "mediaForOperator": [
                  "12.34.12.1/30"
                ]
              },
              "acgContactInfo": {
                "peerGroups": [
                  {
                    "peerGroupName": "TPMPrd",
                    "srvRecord": "xx.yy.com",
                    "ipAddresses": [
                      "192.0.2.1",
                      "192.0.2.2"
                    ],
                    "port": 1234
                  },
                  {
                    "peerGroupName": "OCPrd2",
                    "srvRecord": "xx.yy.com",
                    "ipAddresses": [
                      "192.0.2.3",
                      "192.0.2.4"
                    ],
                    "port": 5678
                  }
                ],
                "backendServices": [
                  {
                    "serviceName": "OC",
                    "ipAddresses": [
                      "192.0.2.1",
                      "192.0.2.2"
                    ],
                    "srvRecord": "",
                    "port": 1234
                  },
                  {
                    "serviceName": "TPM",
                    "srvRecord": "xx.yy.com",
                    "ipAddresses": [
                      "192.0.2.1",
                      "192.0.2.2"
                    ],
                    "port": 1234
                  }
                ]
              }
            },
            {
              "name": "useast2",
              "primaryRegionProperties": {
                "operatorAddresses": [
                  "198.51.100.2"
                ]
              },
              "acgAddressRanges": {
                "signalingForBackendServices": [
                  "12.34.12.1/30"
                ],
                "signalingForOperator": [
                  "12.34.12.1/30"
                ],
                "mediaForBackendServices": [
                  "12.34.12.1/30"
                ],
                "mediaForOperator": [
                  "12.34.12.1/30"
                ]
              },
              "acgContactInfo": {
                "peerGroups": [
                  {
                    "peerGroupName": "TPMPrd1",
                    "srvRecord": "xx.yy.com",
                    "ipAddresses": [
                      "192.0.2.1",
                      "192.0.2.2"
                    ],
                    "port": 1234
                  },
                  {
                    "peerGroupName": "TPMPrd2",
                    "srvRecord": "xx.yy.com",
                    "ipAddresses": [
                      "192.0.2.3",
                      "192.0.2.4"
                    ],
                    "port": 5678
                  }
                ],
                "backendServices": [
                  {
                    "serviceName": "Zoom",
                    "ipAddresses": [
                      "192.0.2.1",
                      "192.0.2.2"
                    ],
                    "srvRecord": "",
                    "port": 1234
                  },
                  {
                    "serviceName": "TPM",
                    "srvRecord": "xx.yy.com",
                    "ipAddresses": [
                      "192.0.2.1",
                      "192.0.2.2"
                    ],
                    "port": 1234
                  }
                ]
              }
            }
          ],
          "peerGroups": [
            {
              "peerGroupName": "TPMPrd",
              "peers": [
                {
                  "peerName": "TPMPrd1",
                  "peerType": "IP",
                  "ipsAndPorts": [
                    {
                      "ipAddress": "23.3.56.7",
                      "port": 5060
                    }
                  ],
                  "allowedSignalingSourceAddressPrefixes": [
                    "23.3.56.0/29"
                  ],
                  "allowedMediaSourceAddressPrefixes": [
                    "23.3.56.0/29",
                    "23.3.57.0/29"
                  ]
                },
                {
                  "peerName": "TPMPrd2",
                  "peerType": "IP",
                  "ipsAndPorts": [
                    {
                      "ipAddress": "23.3.57.7",
                      "port": 5060
                    }
                  ],
                  "allowedSignalingSourceAddressPrefixes": [
                    "24.3.56.0/29"
                  ],
                  "allowedMediaSourceAddressPrefixes": [
                    "23.3.56.0/29",
                    "23.3.57.0/29"
                  ]
                }
              ],
              "signalingProtocol": "TLS",
              "mediaProtocol": "SRTP",
              "codecs": [
                "PCMA",
                "PCMU",
                "G722"
              ]
            },
            {
              "peerGroupName": "OCProd",
              "peers": [
                {
                  "peerName": "OCPrd1",
                  "peerType": "ARecord",
                  "aRecordsAndPorts": [
                    {
                      "aRecord": "xx.yy.com",
                      "port": 5060
                    }
                  ],
                  "allowedSignalingSourceAddressPrefixes": [
                    "23.3.56.0/29"
                  ],
                  "allowedMediaSourceAddressPrefixes": [
                    "23.3.56.0/29",
                    "23.3.57.0/29"
                  ]
                },
                {
                  "peerName": "OCPrd2",
                  "peerType": "SRV",
                  "srvRecord": "_sip._tls.someimsnetwork.fqdn.com",
                  "allowedSignalingSourceAddressPrefixes": [
                    "25.3.56.0/29"
                  ],
                  "allowedMediaSourceAddressPrefixes": [
                    "23.3.56.0/29",
                    "23.3.57.0/29"
                  ]
                }
              ],
              "signalingProtocol": "TLS",
              "mediaProtocol": "SRTP",
              "codecs": [
                "PCMA",
                "PCMU",
                "G722"
              ]
            }
          ],
          "callPolicy": {
            "defaultMappings": {
              "peerGroupToService": [
                {
                  "peerGroup": "TPMPrd",
                  "defaultService": "TeamsPhoneMobile"
                },
                {
                  "peerGroup": "OCProd",
                  "defaultService": "OperatorConnect"
                }
              ],
              "serviceToPeerGroup": [
                {
                  "service": "TeamsPhoneMobile",
                  "defaultPeerGroup": "TPMPrd"
                },
                {
                  "service": "OperatorConnect",
                  "defaultPeerGroup": "OCProd"
                }
              ]
            },
            "peerGroupRoutings": [
              {
                "peerGroupName": "TPMPrd",
                "routings": [
                  {
                    "peerName": "TPMPrd1",
                    "serviceLocation": "westUS",
                    "priority": 0
                  },
                  {
                    "peerName": "TPMPrd1",
                    "serviceLocation": "eastUS",
                    "priority": 1
                  },
                  {
                    "peerName": "TPMPrd2",
                    "serviceLocation": "westUS",
                    "priority": 1
                  },
                  {
                    "peerName": "TPMPrd2",
                    "serviceLocation": "eastUS",
                    "priority": 0
                  }
                ]
              }
            ]
          },
          "connectivity": "PublicAddress",
          "codecs": [
            "PCMA"
          ],
          "e911Type": "Standard",
          "platforms": [
            "OperatorConnect",
            "TeamsDirectRouting",
            "Zoom"
          ],
          "autoGeneratedDomainNameLabelScope": "NoReuse",
          "autoGeneratedDomainNameLabel": "somelabel",
          "teamsVoicemailPilotNumber": "1234567890",
          "apiBridge": {
            "configureApiBridge": "enabled",
            "endpointFqdns": [
              "ap2.hash.commsgw.net"
            ],
            "allowedAddressPrefixes": [
              "198.51.100.192/26"
            ]
          },
          "dnsDelegations": {
            "delegations": [
              {
                "domain": "commsgw.contoso.com",
                "nameServers": [
                  "1.2.3.4",
                  "2.3.4.5"
                ]
              }
            ]
          },
          "customSipHeaders": {
            "headers": [
              {
                "name": "x-contoso-commsgw-identifier"
              }
            ]
          },
          "zoomConfig": {
            "testLines": [
              {
                "phoneNumber": "+1234567890"
              },
              {
                "phoneNumber": "+1234567891"
              },
              {
                "phoneNumber": "+1234567892"
              },
              {
                "phoneNumber": "+1234567893"
              },
              {
                "phoneNumber": "+1234567894"
              },
              {
                "phoneNumber": "+1234567895"
              }
            ],
            "region": "NorthAmerica"
          }
        }
      }
    }
  }
}
