{
  "operationId": "CommunicationsGateways_ListBySubscription",
  "title": "ListCommunicationsGatewayResourceSub",
  "parameters": {
    "subscriptionId": "00000000-0000-0000-0000-000000000000",
    "api-version": "2024-02-16-preview"
  },
  "responses": {
    "200": {
      "body": {
        "value": [
          {
            "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/testrg/providers/Microsoft.VoiceService/communicationsGateways/myname",
            "name": "myname",
            "location": "useast",
            "type": "Microsoft.VoiceService/communicationsGateways",
            "sku": {
              "name": "standard"
            },
            "properties": {
              "status": "ChangePending",
              "operatorPeerGroupConfigScheme": "Custom",
              "serviceLocations": [
                {
                  "name": "useast",
                  "primaryRegionProperties": {
                    "operatorAddresses": [
                      "198.51.100.1"
                    ]
                  },
                  "acgAddressRanges": {
                    "signalingForBackendServices": [
                      "12.34.12.1/30"
                    ],
                    "signalingForOperatorPeerGroups": [
                      "12.34.12.1/30"
                    ],
                    "mediaForBackendServices": [
                      "12.34.12.1/30"
                    ],
                    "mediaForOperatorPeerGroups": [
                      "12.34.12.1/30"
                    ]
                  },
                  "acgContactInfo": {
                    "peerGroups": [
                      {
                        "peerGroupName": "TPMProductionSite1",
                        "srvRecord": "xx.yy.com",
                        "ipAddresses": [
                          "192.0.2.1",
                          "192.0.2.2"
                        ],
                        "port": 1234
                      },
                      {
                        "peerGroupName": "TPMProductionSite2",
                        "srvRecord": "xx.yy.com",
                        "ipAddresses": [
                          "192.0.2.3",
                          "192.0.2.4"
                        ],
                        "port": 5678
                      }
                    ],
                    "backendServices": [
                      {
                        "serviceName": "Zoom",
                        "ipAddresses": [
                          "192.0.2.1",
                          "192.0.2.2"
                        ],
                        "srvRecord": "",
                        "port": 1234
                      },
                      {
                        "serviceName": "TPM",
                        "srvRecord": "xx.yy.com",
                        "ipAddresses": [
                          "192.0.2.1",
                          "192.0.2.2"
                        ],
                        "port": 1234
                      }
                    ]
                  }
                },
                {
                  "name": "useast2",
                  "primaryRegionProperties": {
                    "operatorAddresses": [
                      "198.51.100.2"
                    ]
                  },
                  "acgAddressRanges": {
                    "signalingForBackendServices": [
                      "12.34.12.1/30"
                    ],
                    "signalingForOperatorPeerGroups": [
                      "12.34.12.1/30"
                    ],
                    "mediaForBackendServices": [
                      "12.34.12.1/30"
                    ],
                    "mediaForOperatorPeerGroups": [
                      "12.34.12.1/30"
                    ]
                  },
                  "acgContactInfo": {
                    "peerGroups": [
                      {
                        "peerGroupName": "TPMProductionSite1",
                        "srvRecord": "xx.yy.com",
                        "ipAddresses": [
                          "192.0.2.1",
                          "192.0.2.2"
                        ],
                        "port": 1234
                      },
                      {
                        "peerGroupName": "TPMProductionSite2",
                        "srvRecord": "xx.yy.com",
                        "ipAddresses": [
                          "192.0.2.3",
                          "192.0.2.4"
                        ],
                        "port": 5678
                      }
                    ],
                    "backendServices": [
                      {
                        "serviceName": "Zoom",
                        "ipAddresses": [
                          "192.0.2.1",
                          "192.0.2.2"
                        ],
                        "srvRecord": "",
                        "port": 1234
                      },
                      {
                        "serviceName": "TPM",
                        "srvRecord": "xx.yy.com",
                        "ipAddresses": [
                          "192.0.2.1",
                          "192.0.2.2"
                        ],
                        "port": 1234
                      }
                    ]
                  }
                }
              ],
              "peerGroups": [
                {
                  "name": "TPMProduction",
                  "peers": [
                    {
                      "name": "TPMProductionSite1",
                      "type": "IP",
                      "ipsAndPorts": [
                        {
                          "ipAddress": "23.3.56.7",
                          "port": 5060
                        }
                      ]
                    },
                    {
                      "name": "TPMProductionSite2",
                      "type": "IP",
                      "ipsAndPorts": [
                        {
                          "ipAddress": "23.3.57.7",
                          "port": 5060
                        }
                      ]
                    }
                  ],
                  "signalingProtocol": "TLS",
                  "mediaProtocol": "SRTP",
                  "codecs": [
                    "PCMA",
                    "PCMU",
                    "G722"
                  ],
                  "allowedSignalingSourceAddressPrefixes": [
                    "23.3.56.0/29",
                    "23.3.57.0/29"
                  ],
                  "allowedMediaSourceAddressPrefixes": [
                    "23.3.56.0/29",
                    "23.3.57.0/29"
                  ]
                },
                {
                  "name": "OCProduction",
                  "peers": [
                    {
                      "name": "OCProductionSite1",
                      "type": "ARecord",
                      "aRecordsAndPorts": [
                        {
                          "aRecord": "xx.yy.com",
                          "port": 5060
                        }
                      ]
                    },
                    {
                      "name": "OCProductionSite2",
                      "type": "SRV",
                      "srvRecord": "_sip._tls.someimsnetwork.fqdn.com"
                    }
                  ],
                  "signalingProtocol": "TLS",
                  "mediaProtocol": "SRTP",
                  "codecs": [
                    "PCMA",
                    "PCMU",
                    "G722"
                  ],
                  "allowedSignalingSourceAddressPrefixes": [
                    "23.3.56.0/29",
                    "23.3.57.0/29"
                  ],
                  "allowedMediaSourceAddressPrefixes": [
                    "23.3.56.0/29",
                    "23.3.57.0/29"
                  ]
                }
              ],
              "callPolicy": {
                "defaultMappings": {
                  "peerGroupToService": [
                    {
                      "peerGroup": "TPMProduction",
                      "defaultService": "TeamsPhoneMobile"
                    },
                    {
                      "peerGroup": "OCProduction",
                      "defaultService": "OperatorConnect"
                    }
                  ],
                  "serviceToPeerGroup": [
                    {
                      "service": "TeamsPhoneMobile",
                      "defaultPeerGroup": "TPMProduction"
                    },
                    {
                      "service": "OperatorConnect",
                      "defaultPeerGroup": "OCProduction"
                    }
                  ]
                },
                "peerGroupRoutings": [
                  {
                    "peerGroupName": "TPMProduction",
                    "routings": [
                      {
                        "peer": "TPMProductionSite1",
                        "serviceLocation": "westUS",
                        "priority": 0
                      },
                      {
                        "peer": "TPMProductionSite1",
                        "serviceLocation": "eastUS",
                        "priority": 1
                      },
                      {
                        "peer": "TPMProductionSite2",
                        "serviceLocation": "westUS",
                        "priority": 1
                      },
                      {
                        "peer": "TPMProductionSite2",
                        "serviceLocation": "eastUS",
                        "priority": 0
                      }
                    ]
                  }
                ]
              },
              "connectivity": "PublicAddress",
              "codecs": [
                "PCMA"
              ],
              "e911Type": "Standard",
              "platforms": [
                "OperatorConnect"
              ],
              "autoGeneratedDomainNameLabelScope": "NoReuse",
              "autoGeneratedDomainNameLabel": "somelabel",
              "teamsVoicemailPilotNumber": "1234567890"
            }
          }
        ]
      }
    }
  }
}
